<% content_for :og_tags do %>
  <meta property="og:title" content="<%= @album.name %> - NaChiNaCon">
  <meta property="og:description" content="<%= truncate(@album.description || 'Album kỷ niệm của bé Nacon', length: 160) %>">
  <meta property="og:type" content="website">
  <meta property="og:url" content="<%= request.original_url %>">
  <meta property="og:locale" content="vi_VN">
  <meta property="og:site_name" content="NaChiNaCon">
  <% if @album.cover_image_path.present? %>
    <meta property="og:image" content="<%= @album.cover_image_path %>">
  <% elsif @album.cover_photo.attached? %>
    <meta property="og:image" content="<%= url_for(@album.cover_photo) %>">
  <% end %>
<% end %>

<!-- Header -->
<section class="pt-8 pb-12 px-4 md:px-6 lg:px-8 relative overflow-hidden">
  <div class="absolute top-0 right-0 w-64 h-64 rounded-full blur-3xl animate-pulse-soft" style="background-color: rgba(192, 223, 208, 0.3);"></div>

  <div class="max-w-6xl mx-auto relative z-10">
    <!-- Breadcrumb -->
    <div class="mb-6">
      <%= link_to albums_path, class: "inline-flex items-center gap-2 font-heading font-semibold text-gray-500 hover:text-gray-800 transition-colors" do %>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
        </svg>
        Quay lại Albums
      <% end %>
    </div>

    <div class="animate-fade-in-up">
      <p class="font-accent text-xl mb-2" style="color: #E8B0B0;">Album</p>
      <h1 class="font-heading font-bold text-4xl md:text-5xl text-gray-800 mb-4"><%= @album.name %></h1>
      <% if @album.description.present? %>
        <p class="font-body text-lg text-gray-600 max-w-2xl"><%= @album.description %></p>
      <% end %>
      <p class="font-body text-gray-500 mt-4"><%= @album.memory_count %> kỷ niệm</p>
    </div>
  </div>
</section>

<!-- Memory Grid -->
<section class="py-8 px-4 md:px-6 lg:px-8">
  <div class="max-w-6xl mx-auto">
    <% if @memories.any? %>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 stagger-children">
        <% @memories.each do |memory| %>
          <div class="group rounded-2xl overflow-hidden shadow-soft card-hover cursor-pointer bg-white">
            <div class="aspect-square overflow-hidden">
              <% if memory.image_path.present? || memory.media.attached? %>
                <% if memory.image_path.present? %>
                  <%= image_tag memory.image_path, class: "w-full h-full object-cover img-hover" %>
                <% elsif memory.media.attached? %>
                  <%= image_tag memory.media, class: "w-full h-full object-cover img-hover" %>
                <% end %>
              <% else %>
                <div class="w-full h-full flex items-center justify-center" style="background: linear-gradient(135deg, rgba(193, 221, 216, 0.3) 0%, rgba(242, 194, 194, 0.3) 100%);">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-12 h-12 text-gray-300">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                  </svg>
                </div>
              <% end %>
            </div>
            <div class="p-4">
              <p class="font-body text-xs text-gray-500"><%= memory.taken_at.strftime("%d/%m/%Y") %></p>
              <h3 class="font-heading font-semibold text-gray-800 mt-1 group-hover:text-[#A8CEC8] transition-colors"><%= memory.title %></h3>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-20 rounded-2xl" style="background-color: #FFFBF7;">
        <div class="w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center" style="background-color: #E0EEEB;">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-10 h-10 text-gray-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
          </svg>
        </div>
        <h3 class="font-heading font-semibold text-xl text-gray-700 mb-2">Album trống</h3>
        <p class="font-body text-gray-500">Chưa có kỷ niệm nào trong album này.</p>
      </div>
    <% end %>
  </div>
</section>

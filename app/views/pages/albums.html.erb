<style>
  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(2deg); }
  }

  @keyframes float-reverse {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-12px) rotate(-2deg); }
  }

  @keyframes pulse-glow {
    0%, 100% { opacity: 0.4; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
  }

  .floating { animation: float 5s ease-in-out infinite; }
  .floating-reverse { animation: float-reverse 6s ease-in-out infinite; }
  .floating-delay-1 { animation: float 5s ease-in-out 1s infinite; }
  .floating-delay-2 { animation: float 5s ease-in-out 2s infinite; }
  .floating-delay-3 { animation: float-reverse 6s ease-in-out 1.5s infinite; }
  .pulse-glow { animation: pulse-glow 4s ease-in-out infinite; }

  .gradient-animated {
    background: linear-gradient(135deg, #C1DDD8, #F2C2C2, #C0DFD0, #E8B0B0);
    background-size: 300% 300%;
    animation: gradient-shift 8s ease infinite;
  }

  .shimmer-text {
    background: linear-gradient(90deg, #C1DDD8, #C0DFD0, #C1DDD8);
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 3s linear infinite;
  }

  .glass-card {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.5);
  }

  .album-card {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .album-card:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
  }

  .album-card:hover img {
    transform: scale(1.1);
  }

  .album-card img {
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .stat-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .stat-card:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
  }

  .stat-card:hover .stat-number {
    transform: scale(1.1);
  }

  .stat-number {
    transition: transform 0.3s ease;
  }

  .sparkle {
    animation: sparkle 2s ease-in-out infinite;
  }
  .sparkle-delay-1 { animation-delay: 0.3s; }
  .sparkle-delay-2 { animation-delay: 0.6s; }
  .sparkle-delay-3 { animation-delay: 0.9s; }
  .sparkle-delay-4 { animation-delay: 1.2s; }

  @media (prefers-reduced-motion: reduce) {
    .album-card:hover,
    .stat-card:hover {
      transform: none;
    }
    .floating, .floating-reverse, .floating-delay-1, .floating-delay-2, .floating-delay-3,
    .pulse-glow, .sparkle, .gradient-animated, .shimmer-text {
      animation: none;
    }
  }
</style>

<!-- Header -->
<section class="pt-8 pb-12 md:pt-12 md:pb-16 px-4 md:px-6 lg:px-8 relative overflow-hidden" style="background: linear-gradient(180deg, #FFFBF8 0%, #F8FDFC 40%, #FDF5F5 70%, #F0F9F7 100%);">
  <!-- Animated Background Elements -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-10 -right-20 w-72 h-72 rounded-full blur-3xl pulse-glow" style="background: rgba(193, 221, 216, 0.3);"></div>
    <div class="absolute bottom-20 -left-20 w-64 h-64 rounded-full blur-3xl pulse-glow" style="background: rgba(242, 194, 194, 0.3); animation-delay: 2s;"></div>
    <div class="absolute top-1/3 left-1/4 w-48 h-48 rounded-full blur-3xl pulse-glow" style="background: rgba(192, 223, 208, 0.25); animation-delay: 4s;"></div>
    <div class="absolute bottom-1/4 right-1/3 w-40 h-40 rounded-full blur-3xl pulse-glow" style="background: rgba(168, 206, 200, 0.2); animation-delay: 3s;"></div>

    <!-- Sparkle effects -->
    <div class="absolute top-20 left-20 w-3 h-3 rounded-full sparkle" style="background: #C1DDD8;"></div>
    <div class="absolute top-40 right-32 w-2 h-2 rounded-full sparkle sparkle-delay-1" style="background: #F2C2C2;"></div>
    <div class="absolute bottom-32 left-1/3 w-2 h-2 rounded-full sparkle sparkle-delay-2" style="background: #C0DFD0;"></div>
    <div class="absolute top-1/2 right-20 w-3 h-3 rounded-full sparkle sparkle-delay-3" style="background: #A8CEC8;"></div>
    <div class="absolute bottom-20 right-1/4 w-2 h-2 rounded-full sparkle sparkle-delay-4" style="background: #E8B0B0;"></div>
  </div>

  <div class="max-w-6xl mx-auto relative z-10">
    <div class="text-center">
      <!-- Title with shimmer -->
      <p class="font-accent text-2xl md:text-3xl mb-3" style="color: #E8B0B0;">Bộ sưu tập</p>
      <h1 class="font-heading font-extrabold text-4xl md:text-5xl lg:text-6xl text-gray-800 mb-4">
        Photo <span class="shimmer-text">Albums</span>
      </h1>

      <!-- Decorative line -->
      <div class="flex items-center gap-3 justify-center mb-5">
        <div class="w-16 h-1 rounded-full gradient-animated"></div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 floating" style="color: #C1DDD8;">
          <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
        </svg>
        <div class="w-16 h-1 rounded-full gradient-animated"></div>
      </div>

      <p class="font-body text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
        Những bộ sưu tập kỷ niệm được phân loại theo chủ đề.
      </p>
    </div>
  </div>
</section>

<!-- Albums Stats -->
<section class="py-8 px-4 md:px-6 lg:px-8 -mt-8 relative z-20">
  <div class="max-w-4xl mx-auto">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="stat-card glass-card rounded-2xl p-5 text-center shadow-xl cursor-pointer">
        <div class="w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center shadow-lg gradient-animated">
          <p class="font-body text-sm text-gray-500">Albums</p>
        </div>
        <p class="stat-number font-heading font-bold text-3xl text-gray-800"><%= @albums.count %></p>
      </div>

      <div class="stat-card glass-card rounded-2xl p-5 text-center shadow-xl cursor-pointer">
        <div class="w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center shadow-lg" style="background: linear-gradient(135deg, #F2C2C2, #E8B0B0);">
          <p class="font-body text-sm text-gray-500">Tổng ảnh</p>
        </div>
        <p class="stat-number font-heading font-bold text-3xl text-gray-800"><%= @albums.sum(&:memory_count) %></p>
      </div>

      <div class="stat-card glass-card rounded-2xl p-5 text-center shadow-xl cursor-pointer">
        <div class="w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center shadow-lg" style="background: linear-gradient(135deg, #C0DFD0, #A8D1BD);">
          <p class="font-body text-sm text-gray-500">Thương</p>
        </div>
        <p class="stat-number font-heading font-bold text-3xl text-gray-800">Yêu</p>
      </div>

      <div class="stat-card glass-card rounded-2xl p-5 text-center shadow-xl cursor-pointer">
        <div class="w-14 h-14 rounded-2xl mx-auto mb-3 flex items-center justify-center shadow-lg" style="background: linear-gradient(135deg, #A8CEC8, #C1DDD8);">
          <p class="font-body text-sm text-gray-500">Kỷ niệm</p>
        </div>
        <p class="stat-number font-heading font-bold text-3xl text-gray-800">Giữ mãi</p>
      </div>
    </div>
  </div>
</section>

<!-- Albums Grid -->
<section class="py-14 pb-20 px-4 md:px-6 lg:px-8 relative overflow-hidden" style="background: linear-gradient(180deg, #F8FAF9 0%, #FDFBF9 50%, #F8FDFC 100%);">
  <!-- Background decoration -->
  <div class="absolute top-20 right-10 w-48 h-48 rounded-full blur-3xl opacity-25" style="background: #C1DDD8;"></div>
  <div class="absolute bottom-20 left-10 w-40 h-40 rounded-full blur-3xl opacity-25" style="background: #F2C2C2;"></div>

  <div class="max-w-6xl mx-auto relative z-10">
    <% if @albums.any? %>
      <!-- Section Header -->
      <div class="flex items-center gap-4 mb-10">
        <div class="w-14 h-14 rounded-2xl flex items-center justify-center shadow-xl floating" style="background: linear-gradient(135deg, #C1DDD8, #A8CEC8);">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 text-white">
            <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
          </svg>
        </div>
        <div>
          <p class="font-accent text-lg mb-1" style="color: #A8CEC8;">Khám phá</p>
          <h2 class="font-heading font-bold text-2xl md:text-3xl text-gray-800">Các Bộ Sưu Tập</h2>
          <p class="font-body text-sm text-gray-500"><%= @albums.count %> albums đẹp</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-4" data-controller="scroll-animate">
        <% album_colors = [
          ['#FCE7F3', '#EC4899'],
          ['#D1FAE5', '#22C55E'],
          ['#DBEAFE', '#3B82F6'],
          ['#FEF3C7', '#F59E0B'],
          ['#EDE9FE', '#A855F7'],
          ['#FFEDD5', '#F97316']
        ] %>
        <% @albums.each_with_index do |album, index| %>
          <% colors = album_colors[index % album_colors.length] %>
          <%= link_to album_detail_path(album), class: "group block" do %>
            <div class="album-card bg-white shadow-xl cursor-pointer" style="border-radius: 1.5rem; border: 1px solid #f3f4f6; overflow: hidden;">
              <!-- Cover photo -->
              <div class="aspect-video overflow-hidden relative" style="background: linear-gradient(135deg, <%= colors[0] %>, white); border-radius: 1.5rem 1.5rem 0 0;">
                <% if album.cover_image_path.present? || album.cover_photo.attached? %>
                  <% if album.cover_image_path.present? %>
                    <%= image_tag album.cover_image_path, class: "w-full h-full object-cover" %>
                  <% elsif album.cover_photo.attached? %>
                    <%= image_tag album.cover_photo, class: "w-full h-full object-cover" %>
                  <% end %>
                <% else %>
                  <div class="w-full h-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-16 h-16" style="color: <%= colors[1] %>30;">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                    </svg>
                  </div>
                <% end %>

                <!-- Memory count badge -->
                <div class="absolute top-4 right-4 glass-card px-3 py-1.5 rounded-xl shadow-lg">
                  <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4" style="color: <%= colors[1] %>;">
                      <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="font-heading font-bold text-sm text-gray-700"><%= album.memory_count %></span>
                  </div>
                </div>

                <!-- Gradient overlay on hover -->
                <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </div>

              <!-- Album info -->
              <div class="p-5" style="border-radius: 0 0 1.5rem 1.5rem;">
                <div class="flex items-start gap-3">
                  <div class="flex-1 min-w-0 px-3">
                    <h3 class="font-heading font-bold text-lg text-gray-800 mb-1 line-clamp-1"><%= album.name %></h3>
                    <% if album.description.present? %>
                      <p class="font-body text-sm text-gray-500 line-clamp-2 leading-relaxed"><%= album.description %></p>
                    <% else %>
                      <p class="font-body text-sm text-gray-400 italic">Chưa có mô tả</p>
                    <% end %>
                  </div>
                </div>

                <!-- View more indicator -->
                <div class="flex items-center gap-2 mt-4 font-heading font-semibold text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300" style="color: <%= colors[1] %>;">
                  <span>Xem album</span>
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-4 h-4 group-hover:translate-x-2 transition-transform duration-300">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                  </svg>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <!-- Empty State -->
      <div class="text-center py-20 glass-card rounded-3xl shadow-xl">
        <div class="w-24 h-24 rounded-full mx-auto mb-6 flex items-center justify-center floating" style="background: linear-gradient(135deg, #E0EEEB, #C1DDD8);">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-white">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
          </svg>
        </div>
        <h3 class="font-heading font-bold text-2xl text-gray-700 mb-3">Chưa có album nào</h3>
        <p class="font-body text-gray-500 mb-8 max-w-md mx-auto">Hãy tạo album để nhóm các kỷ niệm theo chủ đề!</p>

        <!-- Suggestion cards -->
        <div class="flex flex-wrap justify-center gap-4">
          <% suggestions = [
            { name: 'Sinh nhật', color: '#F2C2C2' },
            { name: 'Du lịch', color: '#C1DDD8' },
            { name: 'Gia đình', color: '#C0DFD0' },
            { name: 'Kỷ niệm', color: '#A8CEC8' }
          ] %>
          <% suggestions.each do |suggestion| %>
            <div class="glass-card px-5 py-3 rounded-xl shadow-lg cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background: <%= suggestion[:color] %>20;">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4" style="color: <%= suggestion[:color] %>;">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                  </svg>
                </div>
                <span class="font-heading font-semibold text-sm text-gray-600"><%= suggestion[:name] %></span>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</section>
